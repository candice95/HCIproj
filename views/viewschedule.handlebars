<!doctype html>

<html>
<head>
	<title>Create or Browse Appointments</title>
	<meta charset="utf-8">
	<meta name="viewport" content="width=device-width, initial-scale=1.0">
	<script src="https://code.jquery.com/jquery.js"></script>
	<script src="js/stuFunc.js"></script>
	<link href="css/bootstrap.min.css" rel="stylesheet">
	<link href="css/bootstrap-theme.min.css" rel="stylesheet">
	<link rel="stylesheet" type="text/css" href="css/viewschedule.css">
	<link rel='stylesheet' href='fullcalendar/fullcalendar.css' />
</head>

<body>
	<div id="header">
		<div class="container-fluid" id="navbuttons">
			<div class="row">
				<div class="col-xs-2" align="center"></div>
				<div class="col-xs-8" align="center">				
					<button class="btn" id="viewbtn" onclick="backshFunc()">View My Appointments</button>
				</div>
				<div class="col-xs-2" id="logoutdiv">
					<span class="glyphicon glyphicon-off logouticon" aria-hidden="true" onclick="logoutFunc()"></span>
					<div id="logoutlabel">Logout</div>
				</div>
			</div>
			<div class="row" id="viewrow">
				<div class="col-xs-2"></div>
				<div class="col-xs-8" align="center">
					<button class="btn" id="calendarbtn">Create A New Appointment</button>
				</div>
				<div class="col-xs-2">
				</div>
			</div>
		</div>
	
		<div class="container" id="calendardiv">
			<div id="calendar"></div>
			<h6 id="calinfo" align="center">Please click on an available time slot to begin making an appointment</h6>
		</div>
	</div>
	
	<div class ="container" id="public-appt">
	
	<h3 align="center">Public Appointments</h3>
	{{#each allapt}}
	<div class="container-fluid" id="appt">
		<div class="row">
			<div class="col-xs-3" id="labels">
				<p>Name:</p>
				<hr>
				<p>Date:</p>
				<hr>
				<p>Time:</p>
				<hr>
			</div>
  			<div class="col-xs-8" id="apt-background">
    			<div class="row">
      				<div class="col-xs-8" id="namedate">
        				<p>{{name}}</p>
        				<hr>
        				<p>{{date}}</p>
        				<hr>
        				<p>{{time}}</p>
        				<hr>
      				</div>
      				
      				<div class="col-xs-4" id="div{{id}}">
      					<button id="joinbtn{{id}}" class="joinbutton" >Join</button>
      					<script>
      						var email = readCookie("email");
      						var contained = 0;
      						console.log(email);

      						{{#each owner}}
      							if (email == "{{this}}"){
      								contained = 1;
      							}
      						{{/each}}
							if (contained){
								document.getElementById("joinbtn{{id}}").disabled = true;
								document.getElementById("joinbtn{{id}}").style.backgroundColor = "#C69781";
								document.getElementById("joinbtn{{id}}").style.borderColor = "#C69781";
								document.getElementById("joinbtn{{id}}").style.padding = "7px 13px 7px 13px";
								document.getElementById("joinbtn{{id}}").innerHTML = "Joined";
							}
						</script>
      				</div>
      				<div class="col-xs-4 joined{{id}}" id="joined">Appointment joined</div>
    			</div>
  			</div>
  			<div class="col-xs-2"></div>
		</div>
		<div class="row">
			<div class="col-xs-12">
				<p>Description:</p>
			</div>
		</div>
		<div class="row">
			<div class="col-xs-10" id="desc">
				<p>{{description}}</p>
			</div>
		</div>
	</div>
	{{/each}}
	
	</div>

	<script src='fullcalendar/lib/moment.min.js'></script>
	<script src='fullcalendar/fullcalendar.js'></script>
	<script src="js/popup.js"></script>
	<script src="js/viewschedule.js"></script>
	
	
</body>
</html>